	github.com/sushi-go-game/backend		coverage: 0.0% of statements
=== RUN   TestEngineCreateGame
--- PASS: TestEngineCreateGame (0.00s)
=== RUN   TestEngineCreateGameTooManyPlayers
--- PASS: TestEngineCreateGameTooManyPlayers (0.00s)
=== RUN   TestEngineJoinGame
--- PASS: TestEngineJoinGame (0.00s)
=== RUN   TestEngineJoinGameNotFound
--- PASS: TestEngineJoinGameNotFound (0.00s)
=== RUN   TestEngineJoinGameFull
--- PASS: TestEngineJoinGameFull (0.00s)
=== RUN   TestEngineJoinGameAlreadyJoined
--- PASS: TestEngineJoinGameAlreadyJoined (0.00s)
=== RUN   TestEngineStartGame
--- PASS: TestEngineStartGame (0.00s)
=== RUN   TestEngineStartGameNotEnoughPlayers
--- PASS: TestEngineStartGameNotEnoughPlayers (0.00s)
=== RUN   TestEngineGetGame
--- PASS: TestEngineGetGame (0.00s)
=== RUN   TestEngineGetGameNotFound
--- PASS: TestEngineGetGameNotFound (0.00s)
=== RUN   TestEngineListGames
--- PASS: TestEngineListGames (0.00s)
=== RUN   TestEngineListGamesEmpty
--- PASS: TestEngineListGamesEmpty (0.00s)
=== RUN   TestEngineDeleteGame
--- PASS: TestEngineDeleteGame (0.00s)
=== RUN   TestEngineDeleteGameNotFound
--- PASS: TestEngineDeleteGameNotFound (0.00s)
=== RUN   TestEngineRemovePlayer
--- PASS: TestEngineRemovePlayer (0.00s)
=== RUN   TestEngineRemovePlayerAfterStart
--- PASS: TestEngineRemovePlayerAfterStart (0.00s)
=== RUN   TestEngineStartRound
--- PASS: TestEngineStartRound (0.00s)
=== RUN   TestEngineUniqueGameIDs
--- PASS: TestEngineUniqueGameIDs (0.00s)
=== RUN   TestEngineWithCustomConfig
--- PASS: TestEngineWithCustomConfig (0.00s)
=== RUN   TestEngineConcurrentAccess
--- PASS: TestEngineConcurrentAccess (0.00s)
=== RUN   TestEnginePlayCard
--- PASS: TestEnginePlayCard (0.00s)
=== RUN   TestEngineWithdrawCard
--- PASS: TestEngineWithdrawCard (0.00s)
=== RUN   TestEngineRevealCards
--- PASS: TestEngineRevealCards (0.00s)
=== RUN   TestEnginePassHands
--- PASS: TestEnginePassHands (0.00s)
=== RUN   TestEngineScoreRound
--- PASS: TestEngineScoreRound (0.00s)
=== RUN   TestEngineEndGame
--- PASS: TestEngineEndGame (0.00s)
PASS
coverage: 70.4% of statements
ok  	github.com/sushi-go-game/backend/engine	0.004s	coverage: 70.4% of statements
	github.com/sushi-go-game/backend/handlers		coverage: 0.0% of statements
?   	github.com/sushi-go-game/backend/models	[no test files]
=== RUN   TestScoreMakiRolls_SingleWinner
--- PASS: TestScoreMakiRolls_SingleWinner (0.00s)
=== RUN   TestScoreMakiRolls_TiedForFirst
--- PASS: TestScoreMakiRolls_TiedForFirst (0.00s)
=== RUN   TestScoreMakiRolls_TiedForSecond
--- PASS: TestScoreMakiRolls_TiedForSecond (0.00s)
=== RUN   TestScoreMakiRolls_NoMaki
--- PASS: TestScoreMakiRolls_NoMaki (0.00s)
=== RUN   TestScoreTempura_CompleteSets
=== RUN   TestScoreTempura_CompleteSets/No_tempura
=== RUN   TestScoreTempura_CompleteSets/One_tempura
=== RUN   TestScoreTempura_CompleteSets/Two_tempura
=== RUN   TestScoreTempura_CompleteSets/Three_tempura
=== RUN   TestScoreTempura_CompleteSets/Four_tempura
=== RUN   TestScoreTempura_CompleteSets/Five_tempura
--- PASS: TestScoreTempura_CompleteSets (0.00s)
    --- PASS: TestScoreTempura_CompleteSets/No_tempura (0.00s)
    --- PASS: TestScoreTempura_CompleteSets/One_tempura (0.00s)
    --- PASS: TestScoreTempura_CompleteSets/Two_tempura (0.00s)
    --- PASS: TestScoreTempura_CompleteSets/Three_tempura (0.00s)
    --- PASS: TestScoreTempura_CompleteSets/Four_tempura (0.00s)
    --- PASS: TestScoreTempura_CompleteSets/Five_tempura (0.00s)
=== RUN   TestScoreSashimi_CompleteSets
=== RUN   TestScoreSashimi_CompleteSets/No_sashimi
=== RUN   TestScoreSashimi_CompleteSets/One_sashimi
=== RUN   TestScoreSashimi_CompleteSets/Two_sashimi
=== RUN   TestScoreSashimi_CompleteSets/Three_sashimi
=== RUN   TestScoreSashimi_CompleteSets/Four_sashimi
=== RUN   TestScoreSashimi_CompleteSets/Five_sashimi
=== RUN   TestScoreSashimi_CompleteSets/Six_sashimi
--- PASS: TestScoreSashimi_CompleteSets (0.00s)
    --- PASS: TestScoreSashimi_CompleteSets/No_sashimi (0.00s)
    --- PASS: TestScoreSashimi_CompleteSets/One_sashimi (0.00s)
    --- PASS: TestScoreSashimi_CompleteSets/Two_sashimi (0.00s)
    --- PASS: TestScoreSashimi_CompleteSets/Three_sashimi (0.00s)
    --- PASS: TestScoreSashimi_CompleteSets/Four_sashimi (0.00s)
    --- PASS: TestScoreSashimi_CompleteSets/Five_sashimi (0.00s)
    --- PASS: TestScoreSashimi_CompleteSets/Six_sashimi (0.00s)
=== RUN   TestScoreDumplings
=== RUN   TestScoreDumplings/No_dumplings
=== RUN   TestScoreDumplings/One_dumpling
=== RUN   TestScoreDumplings/Two_dumplings
=== RUN   TestScoreDumplings/Three_dumplings
=== RUN   TestScoreDumplings/Four_dumplings
=== RUN   TestScoreDumplings/Five_dumplings
=== RUN   TestScoreDumplings/Six_dumplings
=== RUN   TestScoreDumplings/Ten_dumplings
--- PASS: TestScoreDumplings (0.00s)
    --- PASS: TestScoreDumplings/No_dumplings (0.00s)
    --- PASS: TestScoreDumplings/One_dumpling (0.00s)
    --- PASS: TestScoreDumplings/Two_dumplings (0.00s)
    --- PASS: TestScoreDumplings/Three_dumplings (0.00s)
    --- PASS: TestScoreDumplings/Four_dumplings (0.00s)
    --- PASS: TestScoreDumplings/Five_dumplings (0.00s)
    --- PASS: TestScoreDumplings/Six_dumplings (0.00s)
    --- PASS: TestScoreDumplings/Ten_dumplings (0.00s)
=== RUN   TestScoreNigiri_NoWasabi
=== RUN   TestScoreNigiri_NoWasabi/Squid
=== RUN   TestScoreNigiri_NoWasabi/Salmon
=== RUN   TestScoreNigiri_NoWasabi/Egg
--- PASS: TestScoreNigiri_NoWasabi (0.00s)
    --- PASS: TestScoreNigiri_NoWasabi/Squid (0.00s)
    --- PASS: TestScoreNigiri_NoWasabi/Salmon (0.00s)
    --- PASS: TestScoreNigiri_NoWasabi/Egg (0.00s)
=== RUN   TestScoreNigiri_WithWasabi
=== RUN   TestScoreNigiri_WithWasabi/Wasabi_then_Squid
=== RUN   TestScoreNigiri_WithWasabi/Wasabi_then_Salmon
=== RUN   TestScoreNigiri_WithWasabi/Wasabi_then_Egg
=== RUN   TestScoreNigiri_WithWasabi/Two_Wasabi_then_two_Nigiri
=== RUN   TestScoreNigiri_WithWasabi/Wasabi_then_Nigiri_then_Nigiri
=== RUN   TestScoreNigiri_WithWasabi/Nigiri_then_Wasabi_(wasabi_unused)
--- PASS: TestScoreNigiri_WithWasabi (0.00s)
    --- PASS: TestScoreNigiri_WithWasabi/Wasabi_then_Squid (0.00s)
    --- PASS: TestScoreNigiri_WithWasabi/Wasabi_then_Salmon (0.00s)
    --- PASS: TestScoreNigiri_WithWasabi/Wasabi_then_Egg (0.00s)
    --- PASS: TestScoreNigiri_WithWasabi/Two_Wasabi_then_two_Nigiri (0.00s)
    --- PASS: TestScoreNigiri_WithWasabi/Wasabi_then_Nigiri_then_Nigiri (0.00s)
    --- PASS: TestScoreNigiri_WithWasabi/Nigiri_then_Wasabi_(wasabi_unused) (0.00s)
=== RUN   TestScoreNigiri_MultipleVariants
--- PASS: TestScoreNigiri_MultipleVariants (0.00s)
=== RUN   TestScorePlayerRound
--- PASS: TestScorePlayerRound (0.00s)
=== RUN   TestScorePlayerRound_EmptyCollection
--- PASS: TestScorePlayerRound_EmptyCollection (0.00s)
=== RUN   TestScorePlayerRound_OnlyChopsticks
--- PASS: TestScorePlayerRound_OnlyChopsticks (0.00s)
PASS
coverage: 100.0% of statements
ok  	github.com/sushi-go-game/backend/scoring	0.079s	coverage: 100.0% of statements
=== RUN   TestServerStartStop
2025/11/24 14:08:11 New client connected, total connections: 1
--- PASS: TestServerStartStop (0.10s)
=== RUN   TestServerHealthEndpoint
2025/11/24 14:08:11 Client disconnected, total connections: 0
--- PASS: TestServerHealthEndpoint (0.10s)
=== RUN   TestServerWebSocketConnection
2025/11/24 14:08:11 New client connected, total connections: 1
2025/11/24 14:08:11 Received message from client : {"type":"list_games","payload":{}}
2025/11/24 14:08:11 Message type: list_games, PlayerID: , GameID: 
2025/11/24 14:08:11 Handling list_games
2025/11/24 14:08:11 Client disconnected, total connections: 0
--- PASS: TestServerWebSocketConnection (0.10s)
=== RUN   TestServerMultipleClients
2025/11/24 14:08:11 New client connected, total connections: 1
2025/11/24 14:08:11 New client connected, total connections: 2
2025/11/24 14:08:11 New client connected, total connections: 3
2025/11/24 14:08:11 New client connected, total connections: 4
2025/11/24 14:08:11 New client connected, total connections: 5
2025/11/24 14:08:11 Received message from client : {"type":"list_games","payload":{}}
2025/11/24 14:08:11 Message type: list_games, PlayerID: , GameID: 
2025/11/24 14:08:11 Handling list_games
2025/11/24 14:08:11 Received message from client : {"type":"list_games","payload":{}}
2025/11/24 14:08:11 Received message from client : {"type":"list_games","payload":{}}
2025/11/24 14:08:11 Message type: list_games, PlayerID: , GameID: 
2025/11/24 14:08:11 Handling list_games
2025/11/24 14:08:11 Received message from client : {"type":"list_games","payload":{}}
2025/11/24 14:08:11 Message type: list_games, PlayerID: , GameID: 
2025/11/24 14:08:11 Handling list_games
--- PASS: TestServerMultipleClients (0.10s)
2025/11/24 14:08:11 Received message from client : {"type":"list_games","payload":{}}
2025/11/24 14:08:11 Message type: list_games, PlayerID: , GameID: 
2025/11/24 14:08:11 Handling list_games
=== RUN   TestServerCreateAndJoinGame
2025/11/24 14:08:11 Message type: list_games, PlayerID: , GameID: 
2025/11/24 14:08:11 Handling list_games
2025/11/24 14:08:11 Client disconnected, total connections: 4
2025/11/24 14:08:11 Client disconnected, total connections: 3
2025/11/24 14:08:11 Client disconnected, total connections: 2
2025/11/24 14:08:11 Client disconnected, total connections: 1
2025/11/24 14:08:11 Client disconnected, total connections: 0
2025/11/24 14:08:11 New client connected, total connections: 1
2025/11/24 14:08:11 Received message from client : {"type":"join_game","payload":{"gameId":"","playerName":"Player1"}}
2025/11/24 14:08:11 Message type: join_game, PlayerID: , GameID: 
2025/11/24 14:08:11 broadcastGameState: Starting for game fukuoka-hasu-80
2025/11/24 14:08:11 broadcastGameState: Got game, phase=waiting, round=0
2025/11/24 14:08:11 broadcastGameState: Broadcasting to 1 clients
2025/11/24 14:08:11 broadcastGameState: Building state for player 335b720040229ba61ef5868674bc058e
2025/11/24 14:08:11 broadcastGameState: Sending to player 335b720040229ba61ef5868674bc058e
2025/11/24 14:08:11 broadcastGameState: Complete for game fukuoka-hasu-80
2025/11/24 14:08:11 Broadcasted games list to 1 clients
2025/11/24 14:08:11 Client disconnected, total connections: 0
2025/11/24 14:08:11 All players disconnected from game fukuoka-hasu-80, deleting game
2025/11/24 14:08:11 Broadcasted games list to 0 clients
--- PASS: TestServerCreateAndJoinGame (0.10s)
=== RUN   TestServerGameFlow
    server_test.go:215: Skipping due to async timing issues - covered by other tests
--- SKIP: TestServerGameFlow (0.00s)
=== RUN   TestServerListGames
2025/11/24 14:08:11 New client connected, total connections: 1
2025/11/24 14:08:11 Received message from client : {"type":"join_game","payload":{"gameId":"","playerName":"Alice"}}
2025/11/24 14:08:11 Message type: join_game, PlayerID: , GameID: 
2025/11/24 14:08:11 broadcastGameState: Starting for game fukuoka-momiji-94
2025/11/24 14:08:11 broadcastGameState: Got game, phase=waiting, round=0
2025/11/24 14:08:11 broadcastGameState: Broadcasting to 1 clients
2025/11/24 14:08:11 broadcastGameState: Building state for player e3b41db7d9e81ecc6622fc95d84c3e1c
2025/11/24 14:08:11 broadcastGameState: Sending to player e3b41db7d9e81ecc6622fc95d84c3e1c
2025/11/24 14:08:11 broadcastGameState: Complete for game fukuoka-momiji-94
2025/11/24 14:08:11 Broadcasted games list to 1 clients
2025/11/24 14:08:11 New client connected, total connections: 2
2025/11/24 14:08:11 Received message from client : {"type":"list_games","payload":{}}
2025/11/24 14:08:11 Message type: list_games, PlayerID: , GameID: 
2025/11/24 14:08:11 Handling list_games
2025/11/24 14:08:11 Client disconnected, total connections: 1
--- PASS: TestServerListGames (0.10s)
2025/11/24 14:08:11 All players disconnected from game fukuoka-momiji-94, deleting game
2025/11/24 14:08:11 Broadcasted games list to 1 clients
=== RUN   TestServerCustomGameConfig
2025/11/24 14:08:11 Client disconnected, total connections: 0
--- PASS: TestServerCustomGameConfig (0.00s)
=== RUN   TestServerConnectionClose
2025/11/24 14:08:11 New client connected, total connections: 1
2025/11/24 14:08:11 Client disconnected, total connections: 0
--- PASS: TestServerConnectionClose (0.20s)
=== RUN   TestServerInvalidMessage
2025/11/24 14:08:12 New client connected, total connections: 1
2025/11/24 14:08:12 Received message from client : invalid json
2025/11/24 14:08:12 Failed to unmarshal message: invalid character 'i' looking for beginning of value
2025/11/24 14:08:12 Client disconnected, total connections: 0
--- PASS: TestServerInvalidMessage (0.10s)
PASS
coverage: 83.9% of statements
ok  	github.com/sushi-go-game/backend/server	0.915s	coverage: 83.9% of statements
